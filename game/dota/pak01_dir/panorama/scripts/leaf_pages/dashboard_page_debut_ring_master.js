"use strict";
/// <reference path="../dota.d.ts" />
/// <reference path="../util.ts" />
/// <reference path="../common/async.ts" />
/// <reference path="../dota_sequence_actions.ts" />
var g_abort;
var g_soundGuids = [];
function LoadRingmasterLogo() {
    const cp = $.GetContextPanel();
    const bIsChinese = cp.BAscendantHasClass("Language_schinese") || cp.BAscendantHasClass("Language_tchinese");
}
function StartRingmasterDebut() {
    EndRingmasterDebut();
    g_abort = new Async.AbortController();
    Async.RunSequence(RingmasterSequence, g_abort.signal);
}
function EndRingmasterDebut() {
    if (g_abort) {
        g_abort.abort();
        g_abort = undefined;
    }
    $('#MainContainer').RemoveClass('Initialize');
    $('#ModelBackground')?.RemoveClass('Initialize');
    $('#DebutInformation').RemoveClass('Initialize');
    $('#InformationBody').RemoveClass('Initialize');
    g_soundGuids.forEach(StopUISoundScript);
    g_soundGuids = [];
}
function* RingmasterSequence(abortSignal) {
    $.RegisterForUnhandledEvent("DynamicPropAnimEvent", function (...args) { });
    const pContainer = $('#ModelContainer');
    pContainer.RemoveAndDeleteChildren();
    pContainer.BLoadLayoutSnippet('ModelSnippet');
    const pMain = $('#MainContainer');
    const pScene = $('#ModelBackground');
    yield Async.Delay(0.75);
    $.DispatchEvent('DOTASetCurrentDashboardPageFullscreen', true);
    yield Async.Condition(() => pScene.BHasClass("SceneLoaded"), abortSignal);
    const sceneLoadedTime = new Async.TimeStamp();
    pMain.AddClass('Initialize');
    pScene.AddClass('Initialize');
    g_soundGuids.push(PlayUISoundScript('ringmaster_debut_stinger'));
    g_soundGuids.push(PlayUISoundScript('ringmaster_debut_sfx'));
    yield Async.Delay(8.3);
    $('#DebutInformation').AddClass('Initialize');
    $('#InformationBody').AddClass('Initialize');
    yield Async.Delay(8.5);
    $.DispatchEvent('DOTAGlobalSceneSetCameraEntity', 'ModelBackground', 'hero_camera_post', 0.0);
    $.DispatchEvent('DOTAGlobalSceneSetRootEntity', 'ModelBackground', 'root_post');
    pScene.SetRotateParams(-0.75, 0.75, -0.25, 0.25);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGFzaGJvYXJkX3BhZ2VfZGVidXRfcmluZ19tYXN0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9jb250ZW50L2RvdGEvcGFub3JhbWEvc2NyaXB0cy9sZWFmX3BhZ2VzL2Rhc2hib2FyZF9wYWdlX2RlYnV0X3JpbmdfbWFzdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxxQ0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLDJDQUEyQztBQUMzQyxvREFBb0Q7QUFLcEQsSUFBSSxPQUEwQyxDQUFDO0FBQy9DLElBQUksWUFBWSxHQUFhLEVBQUUsQ0FBQztBQUdoQyxTQUFTLGtCQUFrQjtJQUV2QixNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDL0IsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDLGtCQUFrQixDQUFFLG1CQUFtQixDQUFFLElBQUksRUFBRSxDQUFDLGtCQUFrQixDQUFFLG1CQUFtQixDQUFFLENBQUM7QUFFcEgsQ0FBQztBQUVELFNBQVMsb0JBQW9CO0lBRXpCLGtCQUFrQixFQUFFLENBQUM7SUFFckIsT0FBTyxHQUFHLElBQUksS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3RDLEtBQUssQ0FBQyxXQUFXLENBQUUsa0JBQWtCLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBRSxDQUFDO0FBQzVELENBQUM7QUFFRCxTQUFTLGtCQUFrQjtJQUV2QixJQUFLLE9BQU8sRUFDWjtRQUNJLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNoQixPQUFPLEdBQUcsU0FBUyxDQUFDO0tBQ3ZCO0lBRUQsQ0FBQyxDQUFFLGdCQUFnQixDQUFHLENBQUMsV0FBVyxDQUFFLFlBQVksQ0FBRSxDQUFDO0lBQ25ELENBQUMsQ0FBRSxrQkFBa0IsQ0FBRSxFQUFFLFdBQVcsQ0FBRSxZQUFZLENBQUUsQ0FBQztJQUdyRCxDQUFDLENBQUUsbUJBQW1CLENBQUcsQ0FBQyxXQUFXLENBQUUsWUFBWSxDQUFFLENBQUM7SUFDdEQsQ0FBQyxDQUFFLGtCQUFrQixDQUFHLENBQUMsV0FBVyxDQUFFLFlBQVksQ0FBRSxDQUFDO0lBRXJELFlBQVksQ0FBQyxPQUFPLENBQUUsaUJBQWlCLENBQUUsQ0FBQztJQUMxQyxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQ3RCLENBQUM7QUFFRCxRQUFRLENBQUMsQ0FBQyxrQkFBa0IsQ0FBRSxXQUFnQztJQUUxRCxDQUFDLENBQUMseUJBQXlCLENBQUUsc0JBQXNCLEVBQUUsVUFBVyxHQUFHLElBQUksSUFBcUUsQ0FBQyxDQUFFLENBQUM7SUFFaEosTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFFLGlCQUFpQixDQUFHLENBQUM7SUFDM0MsVUFBVSxDQUFDLHVCQUF1QixFQUFFLENBQUM7SUFDckMsVUFBVSxDQUFDLGtCQUFrQixDQUFFLGNBQWMsQ0FBRSxDQUFDO0lBRWhELE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBRSxnQkFBZ0IsQ0FBYSxDQUFDO0lBQy9DLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBRSxrQkFBa0IsQ0FBc0IsQ0FBQztJQUczRCxNQUFNLEtBQUssQ0FBQyxLQUFLLENBQUUsSUFBSSxDQUFFLENBQUM7SUFFMUIsQ0FBQyxDQUFDLGFBQWEsQ0FBRSx1Q0FBdUMsRUFBRSxJQUFJLENBQUUsQ0FBQztJQUVqRSxNQUFNLEtBQUssQ0FBQyxTQUFTLENBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBRSxhQUFhLENBQUUsRUFBRSxXQUFXLENBQUUsQ0FBQztJQUU5RSxNQUFNLGVBQWUsR0FBRyxJQUFJLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUU5QyxLQUFLLENBQUMsUUFBUSxDQUFFLFlBQVksQ0FBRSxDQUFDO0lBQy9CLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7SUFFOUIsWUFBWSxDQUFDLElBQUksQ0FBRSxpQkFBaUIsQ0FBRSwwQkFBMEIsQ0FBRSxDQUFFLENBQUM7SUFDckUsWUFBWSxDQUFDLElBQUksQ0FBRSxpQkFBaUIsQ0FBRSxzQkFBc0IsQ0FBRSxDQUFFLENBQUM7SUFLakUsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFFLEdBQUcsQ0FBRSxDQUFDO0lBRXpCLENBQUMsQ0FBRSxtQkFBbUIsQ0FBRyxDQUFDLFFBQVEsQ0FBRSxZQUFZLENBQUUsQ0FBQztJQUNuRCxDQUFDLENBQUUsa0JBQWtCLENBQUcsQ0FBQyxRQUFRLENBQUUsWUFBWSxDQUFFLENBQUM7SUFHbEQsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFFLEdBQUcsQ0FBRSxDQUFDO0lBRXpCLENBQUMsQ0FBQyxhQUFhLENBQUUsZ0NBQWdDLEVBQUUsaUJBQWlCLEVBQUUsa0JBQWtCLEVBQUUsR0FBRyxDQUFFLENBQUM7SUFDaEcsQ0FBQyxDQUFDLGFBQWEsQ0FBRSw4QkFBOEIsRUFBRSxpQkFBaUIsRUFBRSxXQUFXLENBQUUsQ0FBQztJQUNsRixNQUFNLENBQUMsZUFBZSxDQUFFLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUUsQ0FBQztBQUV2RCxDQUFDIn0=