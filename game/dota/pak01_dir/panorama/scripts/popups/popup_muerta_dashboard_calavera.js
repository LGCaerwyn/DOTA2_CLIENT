"use strict";
/// <reference path="../dota.d.ts" />
/// <reference path="../util.ts" />
/// <reference path="../dota_sequence_actions.ts" />
var flameRevealSeq;
var glowSeq;
var flameLoopingSeq;
var glowLoopingSeq;
const TRANSITION_INTERVAL = 0.02;
const INITIAL_DELAY = 0.2;
const LOOP_START = 45;
const ANIM_END = 134;
// Called from C++
var FlameReveal = function (panel_id) {
    let node = $('#' + panel_id);
    node.AddClass('Frame000');
    if (flameLoopingSeq) {
        flameLoopingSeq.finish();
    }
    if (flameRevealSeq) {
        flameRevealSeq.finish();
    }
    flameRevealSeq = new RunSequentialActions();
    flameRevealSeq.actions.push(new WaitAction(INITIAL_DELAY));
    let currentFrame = 1;
    while (currentFrame < LOOP_START) {
        flameRevealSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        flameRevealSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        flameRevealSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        currentFrame++;
    }
    flameLoopingSeq = new RunLoopingActions();
    while (currentFrame <= ANIM_END) {
        flameLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        if (currentFrame <= ANIM_END) {
            flameLoopingSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        }
        flameLoopingSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        if (currentFrame == ANIM_END) {
            flameLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + ANIM_END.toString().padStart(3, '0')));
        }
        currentFrame++;
    }
    flameRevealSeq.actions.push(flameLoopingSeq);
    RunSingleAction(flameRevealSeq);
};
// Called from C++
var GlowReveal = function (panel_id) {
    let node = $('#' + panel_id);
    node.AddClass('Frame000');
    if (glowLoopingSeq) {
        glowLoopingSeq.finish();
    }
    if (glowSeq) {
        glowSeq.finish();
    }
    glowSeq = new RunSequentialActions();
    glowSeq.actions.push(new WaitAction(INITIAL_DELAY));
    let currentFrame = 1;
    while (currentFrame < LOOP_START) {
        glowSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        glowSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        glowSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        currentFrame++;
    }
    glowLoopingSeq = new RunLoopingActions();
    while (currentFrame <= ANIM_END) {
        glowLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        if (currentFrame <= ANIM_END) {
            glowLoopingSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        }
        glowLoopingSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        if (currentFrame == ANIM_END) {
            glowLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + ANIM_END.toString().padStart(3, '0')));
        }
        currentFrame++;
    }
    glowSeq.actions.push(glowLoopingSeq);
    RunSingleAction(glowSeq);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wdXBfbXVlcnRhX2Rhc2hib2FyZF9jYWxhdmVyYS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInBvcHVwX211ZXJ0YV9kYXNoYm9hcmRfY2FsYXZlcmEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHFDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMsb0RBQW9EO0FBRXBELElBQUksY0FBZ0QsQ0FBQztBQUNyRCxJQUFJLE9BQXlDLENBQUM7QUFDOUMsSUFBSSxlQUE4QyxDQUFDO0FBQ25ELElBQUksY0FBNkMsQ0FBQztBQUVsRCxNQUFNLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUNqQyxNQUFNLGFBQWEsR0FBRyxHQUFHLENBQUM7QUFDMUIsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3RCLE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQztBQUVyQixrQkFBa0I7QUFDbEIsSUFBSSxXQUFXLEdBQUcsVUFBVSxRQUFnQjtJQUN4QyxJQUFJLElBQUksR0FBWSxDQUFDLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxDQUFDO0lBQ3RDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFMUIsSUFBSSxlQUFlLEVBQUU7UUFDakIsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQzVCO0lBRUQsSUFBSSxjQUFjLEVBQUU7UUFDaEIsY0FBYyxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQzNCO0lBRUQsY0FBYyxHQUFHLElBQUksb0JBQW9CLEVBQUUsQ0FBQztJQUM1QyxjQUFjLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBRTNELElBQUksWUFBWSxHQUFHLENBQUMsQ0FBQztJQUNyQixPQUFPLFlBQVksR0FBRyxVQUFVLEVBQUU7UUFDOUIsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsT0FBTyxHQUFHLENB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