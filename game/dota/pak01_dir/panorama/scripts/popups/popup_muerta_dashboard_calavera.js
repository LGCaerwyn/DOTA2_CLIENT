"use strict";
/// <reference path="../dota.d.ts" />
/// <reference path="../util.ts" />
/// <reference path="../dota_sequence_actions.ts" />
var flameRevealSeq;
var glowSeq;
var flameLoopingSeq;
var glowLoopingSeq;
const TRANSITION_INTERVAL = 0.02;
const INITIAL_DELAY = 0.2;
const LOOP_START = 45;
const ANIM_END = 134;
// Called from C++
var FlameReveal = function (panel_id) {
    let node = $('#' + panel_id);
    node.AddClass('Frame000');
    if (flameLoopingSeq) {
        flameLoopingSeq.finish();
    }
    if (flameRevealSeq) {
        flameRevealSeq.finish();
    }
    flameRevealSeq = new RunSequentialActions();
    flameRevealSeq.actions.push(new WaitAction(INITIAL_DELAY));
    let currentFrame = 1;
    while (currentFrame < LOOP_START) {
        flameRevealSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        flameRevealSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        flameRevealSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        currentFrame++;
    }
    flameLoopingSeq = new RunLoopingActions();
    while (currentFrame <= ANIM_END) {
        flameLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        if (currentFrame <= ANIM_END) {
            flameLoopingSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        }
        flameLoopingSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        if (currentFrame == ANIM_END) {
            flameLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + ANIM_END.toString().padStart(3, '0')));
        }
        currentFrame++;
    }
    flameRevealSeq.actions.push(flameLoopingSeq);
    RunSingleAction(flameRevealSeq);
};
// Called from C++
var GlowReveal = function (panel_id) {
    let node = $('#' + panel_id);
    node.AddClass('Frame000');
    if (glowLoopingSeq) {
        glowLoopingSeq.finish();
    }
    if (glowSeq) {
        glowSeq.finish();
    }
    glowSeq = new RunSequentialActions();
    glowSeq.actions.push(new WaitAction(INITIAL_DELAY));
    let currentFrame = 1;
    while (currentFrame < LOOP_START) {
        glowSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        glowSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        glowSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        currentFrame++;
    }
    glowLoopingSeq = new RunLoopingActions();
    while (currentFrame <= ANIM_END) {
        glowLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + (currentFrame - 1).toString().padStart(3, '0')));
        if (currentFrame <= ANIM_END) {
            glowLoopingSeq.actions.push(new AddClassAction(node, 'Frame' + currentFrame.toString().padStart(3, '0')));
        }
        glowLoopingSeq.actions.push(new WaitAction(TRANSITION_INTERVAL));
        if (currentFrame == ANIM_END) {
            glowLoopingSeq.actions.push(new RemoveClassAction(node, 'Frame' + ANIM_END.toString().padStart(3, '0')));
        }
        currentFrame++;
    }
    glowSeq.actions.push(glowLoopingSeq);
    RunSingleAction(glowSeq);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wdXBfbXVlcnRhX2Rhc2hib2FyZF9jYWxhdmVyYS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NvbnRlbnQvZG90YS9wYW5vcmFtYS9zY3JpcHRzL3BvcHVwcy9wb3B1cF9tdWVydGFfZGFzaGJvYXJkX2NhbGF2ZXJhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxxQ0FBcUM7QUFDckMsbUNBQW1DO0FBQ25DLG9EQUFvRDtBQUVwRCxJQUFJLGNBQWdELENBQUM7QUFDckQsSUFBSSxPQUF5QyxDQUFDO0FBQzlDLElBQUksZUFBOEMsQ0FBQztBQUNuRCxJQUFJLGNBQTZDLENBQUM7QUFFbEQsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUM7QUFDakMsTUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFDO0FBQzFCLE1BQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUN0QixNQUFNLFFBQVEsR0FBRyxHQUFHLENBQUM7QUFFckIsa0JBQWtCO0FBQ2xCLElBQUksV0FBVyxHQUFHLFVBQVUsUUFBZ0I7SUFDeEMsSUFBSSxJQUFJLEdBQVksQ0FBQyxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQztJQUN0QyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBRTFCLElBQUksZUFBZSxFQUFFO1FBQ2pCLGVBQWUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUM1QjtJQUVELElBQUksY0FBYyxFQUFFO1FBQ2hCLGNBQWMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUMzQjtJQUVELGNBQWMsR0FBRyxJQUFJLG9CQUFvQixFQUFFLENBQUM7SUFDNUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztJQUUzRCxJQUFJLFlBQVksR0FBRyxDQUFDLENBQUM7SUFDckIsT0FBTyxZQUFZLEdBQUcsVUFBVSxFQUFFO1FBQzlCLGNBQWMsQ0FBQyxPQUFPLENB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