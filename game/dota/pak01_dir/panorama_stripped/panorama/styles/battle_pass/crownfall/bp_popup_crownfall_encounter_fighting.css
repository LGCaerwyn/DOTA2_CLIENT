

.PopupPanel.FightingGame {
	background-color: none;
	animation: none;
	border: 0px solid transparent;
	padding: 0px;
	box-shadow: none;
	width: 1536px;
	height: 864px;
	flow-children: none;
	overflow: noclip;
	transition-property: none;
	transition-timing-function: none;
	transition-duration: 0s;
	transition-delay: 0s;
	animation-name: none;
	animation-duration: 0s;
}

.PopupPanel.FightingGame.Maximized {
	width: 1920px;
	height: 1080px;
	.AspectRatio16x10 &
	{
		width: 100%;
		height: 90%;
	}

	.MainContents {
		ui-scale: 100%;
		border: 0px;
	}

	#ResizeButtonContainer,
	#CloseButtonContainer {
		margin: 0px;
	}
}

#ResizeButtonContainer {
	horizontal-align: left;
	transform: scaleX( -1 );
}

#ResizeButtonContainer,
#CloseButtonContainer {
	margin: 1px;
}

#FightingGamePanel.Hidden {
	visibility: collapse;
}

.MainContents {
	width: 100%;
	height: 100%;
	ui-scale: 80%;
	horizontal-align: center;
	vertical-align: middle;

	#FightingGamePanelContainer
	{
		width: 100%;
		height: 100%;

		#FightingGamePanel {
			width: 100%;
			height: 100%;
		}
	}

	#FightingGameMenu {
		transition-property: opacity;
		transition-duration: 0.2s;
	}

	.MissingDataSpinnerContainer
	{
		horizontal-align: center;
		vertical-align: middle;
		visibility: visible;
		ui-scale: 200%;
		z-index: 10;

		.EncounterLoaded &
		{
			visibility: collapse;
		}
	}
}

.VisualNovelOuterContainer {
	background-color: #000000de;
	padding-top: 300px;
	z-index: 5;
}

DOTAFightingGamePanel {
    border: 0px solid rgb(255, 255, 255);
    border-brush: gradient( linear, 0% 0%, 0% 100%, from( gold1 ), color-stop( 0.5, gold2 ), to( gold3 ) );
	transition-property: none;

	horizontal-align: center;
	vertical-align: middle;

	background-color: gradient( linear, 0% 0%, 0% 100%, from( charcoalLight ), to( charcoalDark ) );

	visibility: collapse;

	&.Loaded {
		visibility: visible;
	}

	&.P0WonMatch.MatchStateMatchEnd,
	&.P1WonMatch.MatchStateMatchEnd,
	&.DrewMatch.MatchStateMatchEnd,
	&.TimeOutHappening {
		#ForegroundScene,
		#BackgroundScene,
		#LeftHero,
		#RightHero,
		#BackgroundUILayer {
			blur: gaussian( 3px );
		}
	}

	#ForegroundScene,
	#BackgroundScene,
	#LeftHero,
	#RightHero,
	#BackgroundUILayer {
		transition-property: blur;
		transition-duration: 0.3s;
	}

	#ForegroundScene,
	#BackgroundScene {
		width: 100%;
		height: 100%;
	}

	#ForegroundScene {
		brightness: 1;
		contrast: 1.1;
		blur: gaussian(2px);
		wash-color: #98afe7;
	}

	&.MatchStateIntro #ForegroundScene,
	&.MatchStateIntro #LeftHero,
	&.MatchStateIntro #RightHero,
	&.MatchStateIntro #LeftHeroShadow,
	&.MatchStateIntro #RightHeroShadow
	{
		visibility: collapse;
	}

	#BackgroundUILayer {
		width: 100%;
		height: 100%;
		visibility: visible;
	}

	&.MatchStateIntro #BackgroundUILayer
	{		
		visibility: collapse;
	}

	#EffectsPanel {
		width: 100%;
		height: 100%;
	}

	#ForegroundUILayer {
		width: 100%;
		height: 100%;

		#NetworkStats {
			visibility: collapse;
			horizontal-align: center;
			width: fit-children;
			height: fit-children;
			flow-children: right;
			ignore-parent-flow: true;

			Label {
				margin: 4px;
				font-size: 18px;
				color: #dddddd;
				text-shadow: 2px 2px 3px #000000FF;
			}
		}
	}	

	&.LocalPlayerLeft .Right .ScoreAnnouncementPoints,
	&.LocalPlayerRight .Left .ScoreAnnouncementPoints {
		visibility: collapse;
	}

	&.P1ShowFirstBlood .ScoreAnnouncementContainer.Left .FirstBlood,
	&.P2ShowFirstBlood .ScoreAnnouncementContainer.Right .FirstBlood,
	&.P1ShowCounterHit .ScoreAnnouncementContainer.Left .CounterHit, 
	&.P2ShowCounterHit .ScoreAnnouncementContainer.Right .CounterHit,
	&.P1ShowPunish .ScoreAnnouncementContainer.Left .PunishCounter, 
	&.P2ShowPunish .ScoreAnnouncementContainer.Right .PunishCounter,
	&.P1ShowComboCounter .ScoreAnnouncementContainer.Left .ComboCounter, 
	&.P2ShowComboCounter .ScoreAnnouncementContainer.Right .ComboCounter	{
		opacity: 1;
		transform: translateX( 0px );
		brightness: 1;

		.ScoreAnnouncementShimmer {	
			animation-name: ShimmerScore;
			animation-duration: 0.5s;
			animation-timing-function: ease-out;
			animation-delay: 0.1s;
		}
	}

	&.SinglePlayer:not(.FirstFight) .ScoreAnnouncementPoints {
		visibility: visible;
	}


  	                                                               
	 
		           
	 
  
}

#PauseContainer {
	width: 100%;
	height: 100%;

	#PauseTextContainer {
		horizontal-align: center;
		vertical-align: center;
		opacity-mask: url( "file://{images}/events/crownfall/fight/grain_mask.png" );
		padding: 32px 64px 32px 64px;
		background-color: black;
		border-radius: 8px;
		flow-children: down;
		
		transition-property: transform, opacity;
		transition-duration: 0.15s;
		transition-timing-function: cubic-bezier(0, 0.9, 0, 0.9);                

		opacity: 0;
		transform: scale3d( 1.3, 1.3, 1 );

		.Paused & {
			opacity: 1;
			transform: none;
			transition-duration: 0.1s;
			transition-timing-function: cubic-bezier(1, 0, 1, 1);               
		}

		Label {
			color: white;
			text-align: center;
		}

		.PauseIcon {
			width: 48px;
			horizontal-align: center;
			margin-bottom: 8px;
		}
	}

}

#BackgroundScene,
#BackgroundUILayer,
#ForegroundUILayer,
#ForegroundScene,
#LeftHero,
#RightHero {
	sound: "ui_friends_slide_in";

	.Paused & {
		saturation: 0.2;
		brightness: 0.7;
		sound: "ui_chat_slide_in";
	}
}

.ScoreAnnouncementContainer {
	ignore-parent-flow: true;
	margin-top: 300px;
	flow-children: down;
	
	.ScoreAnnouncement {
		margin-bottom: 20px;
		height: 64px;
		overflow: noclip;

		transition-property: opacity, transform, brightness;
		transition-duration: 0.2s, 0.2s, 1s;
		transition-timing-function: cubic-bezier(0, 0.9, 0, 0.9);                

		brightness: 5;
		transform: translateX( -32px );
		opacity: 0;
		transition-timing-function: cubic-bezier(1, 0, 1, 1);               
	}

	Label {
		color: gradient( linear, 0% 20%, 0% 100%, from( white ), to( #c7d0d4 ) );
	}

	.ScoreAnnouncementInfoContainer {
		flow-children: right;
		padding: 0px 44px 0px 16px;
		vertical-align: center;
	}

	.ScoreAnnouncementIcon {
		width: 32px;
		vertical-align: center;
		margin-right: 40px;
		opacity-brush: gradient( linear, 0% 0%, 50% 100%, from( #ffffffff ), to( #dfdfdf ) );
	}

	.ComboCount {
		width: 48px;
		text-align: center;
		margin-right: 32px;
		font-size: 36px;
		font-family: titleFont;
		font-weight: semi-bold;
		text-shadow: 0px 0px 12px rgba(231, 126, 255, 0.74);
		color: whitesmoke;
	}

	.ScoreDataContainer {
		flow-children: down;
		vertical-align: center;
	}

	.ScoreAnnouncementPoints,
	.ScoreAnnouncementLabel {
		text-shadow: 0px 4px 12px rgba(0, 0, 0, 0.6);
	}

	.ScoreAnnouncementPoints {
		visibility: collapse;                               
		margin-top: -3px;
		opacity: 0.8;
	}

	.ScoreAnnouncementShimmer {
		width: 100%;
		height: 100%;
		ignore-parent-flow: true;
		transform: skewX( -15deg );
		margin-left: -24px;
		opacity: 0.4;
		-s2-mix-blend-mode: screen;
	}

	.ScoreAnnouncementBackground {
		width: 100%;
		height: 100%;
		ignore-parent-flow: true;
		transform: skewX( -15deg );
		margin-left: -24px;
		border: 1px solid rgba(255, 255, 255, 1);
		opacity: 0.6;
	}

	.ScoreAnnouncementIconBackground {
		width: 92px;
		height: 100%;
		ignore-parent-flow: true;
		transform: skewX( -15deg );
		margin-left: -24px;
		border: 2px solid rgba(255, 255, 255, 0.5);
	}

	               
		            
		             
		                       
		                         
		                         
		                       
		                 
		                    
		             
		              
	    

	.ComboCounter {
		.ScoreAnnouncementBackground,
		.ScoreAnnouncementIconBackground {
			background-color: gradient( linear, 0% 0%, 100% 0%, from( rgba(150, 0, 215, 0.162) ), to( rgba(112, 20, 224, 0.5) ));
			border-brush: gradient( linear, 100% 0%, 20% 0%, from( #ab51ffcb ), to( #ffffff00 )); 
		}

		.ScoreAnnouncementInfoContainer {
			padding-left: 8px;
		}
	}

	.FirstBlood {
		.ScoreAnnouncementBackground,
		.ScoreAnnouncementIconBackground {
			background-color: gradient( linear, 0% 0%, 100% 0%, from( rgba(215, 0, 57, 0.162) ), to( rgba(234, 0, 31, 0.5) ));
			border-brush: gradient( linear, 100% 0%, 20% 0%, from( #ff5151cb ), to( #ffffff00 )); 
		}
		               
			                                                                                                                                              
		    
	}

	.CounterHit {
		.ScoreAnnouncementBackground,
		.ScoreAnnouncementIconBackground {
			background-color: gradient( linear, 0% 0%, 100% 0%, from( rgba(212, 169, 77, 0.2) ), to( rgba(255, 215, 141, 0.3) ));
			border-brush: gradient( linear, 100% 0%, 20% 0%, from( #ffd69475 ), to( #ffffff00 )); 
		}
		               
			                                                                                                                                                                      
		    
	}

	.PunishCounter {
		.ScoreAnnouncementBackground,
		.ScoreAnnouncementIconBackground {
			background-color: gradient( linear, 0% 0%, 100% 0%, from( rgba(72, 100, 220, 0.5) ), to( rgba(71, 140, 214, 0.4) ));
			border-brush: gradient( linear, 100% 0%, 20% 0%, from( #7fb2ff9c ), to( #ffffff00 )); 
		}
		               
			                                                                                                                                                            
		    
	}

	&.Left {
		horizontal-align: left;
	}

	&.Right {
		horizontal-align: right;
		transform: scaleX( -1 );

		.ScoreDataContainer,
		.ScoreAnnouncementIcon,
		.ComboCount {
			transform: scaleX( -1 );
		}
	}
}

@keyframes 'ShimmerScore' {
	0% {
		background-color: gradient( linear, -50% 0%, 0% 0%, from( #FFFFFF00 ), color-stop( 0.5, #FFFFFF ), to( #FFFFFF00 ) );
	}
	
	100% {
		background-color: gradient( linear, 100% 100%, 150% 100%, from( #FFFFFF00 ), color-stop( 0.5, #FFFFFF ), to( #FFFFFF00 ) );
	}
}

.PauseHint {
	horizontal-align: right;
	vertical-align: bottom;
	flow-children: right;
	border-radius: 8px;
	padding: 24px;
	padding-right: 28px;

	transition-property: transform, opacity;
	transition-duration: 0.3s;
	transition-timing-function: cubic-bezier(0, 1, 0, 1);                

	opacity: 0;
	transform: translateY( 24px );

	.PauseLabelContainer {
		vertical-align: center;
		margin-right: 8px;
		margin-top: -2px;
	}

	.PauseLabel,
	.UnPauseLabel {
		horizontal-align: right;
		opacity: 0;

		transition-property: transform, opacity;
		transition-duration: 0.2s;
		transition-timing-function: ease-out;
	}

	.PauseLabel {
		transition-duration: 0.05s;
		opacity: 1;
		transform: none;
		transition-delay: 0s;
		
		.Paused & {
			transition-duration: 0.2s;
			opacity: 0;
			transform: translateY( -8px );
			transition-delay: 0.05s;
		}
	}

	.UnPauseLabel {
		transition-duration: 0.2s;
		opacity: 0;
		transform: translateY( 8px );
		transition-delay: 0.05s;

		.Paused & {
			transition-duration: 0.05s;
			opacity: 1;
			transform: none;
			transition-delay: 0s;
		}
	}

	.MatchStateRoundInProgress & {
		opacity: 1;
		transform: none;
		transition-timing-function: cubic-bezier(1, 0, 1, 1);               
	}
}

#ControlsDisplay {
	horizontal-align: center;
	vertical-align: bottom;
	flow-children: down;
	border-radius: 8px;
	background-color: gradient( radial, 50% 100%, 0% 0%, 50% 100%, from( rgba(0, 0, 0, 0.6) ), color-stop( 0.5, rgba(0, 0, 0, 0.4) ), to( rgba(0, 0, 0, 0) ) );
	padding: 48px 200px 18px;

	transition-property: transform, opacity;
	transition-duration: 0.3s;
	transition-timing-function: cubic-bezier(0, 1, 0, 1);                

	opacity: 0;
	transform: translateY( 24px );

	.ControlsTitle {
		horizontal-align: center;
		margin: 6px;
		opacity: 0.8;
	}

	.OrText {
		brightness: 0.9;
		color: whitesmoke;
		font-weight: semi-bold;
		letter-spacing: 1px;
		text-transform: uppercase;
		text-align: center;
		text-shadow: 0px 0px 12px rgba(213, 236, 255, 0.1);
		animation-name: none;
	}

	.ControlKey {
		horizontal-align: center;
		margin: 3px;
		animation-name: none;
	}

	.Column {
		flow-children: down;
		vertical-align: bottom;
	}

	.ColumnSpacer {
		width: 12px;
	}

	.Row {
		flow-children: right;
	}	

	.FirstFight.MatchStateRoundInProgress &,
	.FirstFight.MatchStateRound1Start &,
	.FirstFight.MatchStateRound2Start &,
	.FirstFight.MatchStateRound3Start & {
		opacity: 1;
		transform: none;
		transition-timing-function: cubic-bezier(1, 0, 1, 1);               

		.ControlKey,
		.OrText {
			animation-name: PulseControKey;
			animation-duration: 1s;
			animation-iteration-count: infinite;
			animation-direction: alternate-reverse;
		}
	}
}

@keyframes 'PulseControKey' {
	0% { }	
	100% { brightness: 2; }
}

DOTAFightingGamePanel.ShowNetstats #ForegroundUILayer #NetworkStats
{
	visibility: visible;
}


.HeroLayer {
	horizontal-align: left;
	vertical-align: top;
	width: 100%;
	height: 100%;
	transform-origin: 50% 100%;
}

.HeroLayer.Hidden {
	visibility: collapse;
}

.HeroLayer.Flipped {
	transform: scaleX( -1.0 );
}

.HeroShadow {
	opacity: 1;
	transform-origin: 50% 87%;
	blur: gaussian( 4px );
	opacity-brush: gradient( linear, 0% 0%, 0% 100%, from( #0000 ), color-stop( 0.5, #0000 ), color-stop( 0.6, #0000 ), color-stop( 0.9, #000 ),to( #000 ) );
	transform: scaleX( 1.0 ) scaleY( -0.6 ) translateY( 0px ) translateX( 0px ) skewX( -60deg );
}

.HeroShadow.Flipped {
	transform: scaleX( -1.0 ) scaleY( -0.6 ) translateY( 0px ) translateX( 0px ) skewX( -60deg );
}

#DebugCanvas {
	width: 100%;
	height: 100%;
}

.DebugHeroContainer {
	visibility: collapse;

	flow-children: down;

	margin-left: -6px;
	margin-top: 10px;
}

.ShowDebug .DebugHeroContainer {
	visibility: visible;
}

.DebugHeroState {
	font-size: 24px;
	font-weight: bold;

	color: aqua;
}

.DebugHeroPosition {
	font-size: 24px;
	font-weight: bold;

	color: greenyellow;
}

#CloseButtonContainer {
	.ReturnIcon
	{
		horizontal-align: right;
		margin: 12px;
		img-shadow: 0px 1px 8px rgba(0, 0, 0, 1);
		wash-color: LighterGrey;
		opacity: 0.6;
		transition-property: wash-color, opacity;
		transition-duration: 0.1s;
	}

	&:hover
	{
		.ReturnIcon
		{
			wash-color: white;
			opacity: 1;
		}
	}

	.CloseIcon
	{
		visibility: collapse;
	}
}

#BackgroundUILayer {
	width: 100%;
	height: 100%;
}

                         
	            
	                       
	                  

	             
		                    
		                       

		       
			                   
		 

		                  
			                                
			                   
		 

		                 
			                     
			                   

			      
				                
				                   
				                       
				                    
				                          
				                                                                                    
				                                            
				                                                  
				                 
				                       
				                   
				                  
				                               
			 

			               
				                                
				                               
				                       
				                  
			 
		 
	 

	                  
		
	 

	                  
		                        

		                 
			                        
			                    
		 

		       
			                        
		 
	 
    

.HUDContainer {
	width: 100%;
	horizontal-align: center;
	padding: 12px 48px;
	flow-children: right;

	.HUDBackground {
		width: 1600px;
		margin-top: 28px;
		horizontal-align: center;
		ignore-parent-flow: true;
	}

	.RedGlow {
		width: 900px;
		height: 600px;
		ignore-parent-flow: true;
		margin-top: -280px;	
		background-color: gradient( radial, 50% 50%, 0% 0%, 50% 50%, from( red ), color-stop( 0.2, red, to( rgba(255, 0, 0, 0) ) );
		blur: gaussian( 24px );

		opacity: 0;

		&.Left {
			horizontal-align: left;
			margin-left: -40px;

			.P1HealthLow & {
				animation-name: FlashRedGlow;
				animation-duration: 1.5s;
				animation-iteration-count: 1;
			}
		}

		&.Right {
			horizontal-align: right;
			margin-right: -40px;

			.P2HealthLow & {
				animation-name: FlashRedGlow;
				animation-duration: 1.5s;
				animation-iteration-count: 1;
			}
		}
	}

	#CountdownContainer {
		
		margin: 0px -28px;

		.TimerShadow,
		.TimerBackgroundImage,
		.TimerBorder {
			width: 280px;
		}

		.TimerParticles {
			width: 100%;
			height: 100%;
			opacity-mask: url( "file://{images}/events/crownfall/fight/hud/timer_mask.png" );
			hue-rotation: -20deg;
			saturation: 0.9;
		}

		.TimerBackgroundImage {
			opacity-mask: url( "file://{images}/events/crownfall/fight/hud/timer_mask.png" );

			transition-property: wash-color, brightness;
			transition-duration: 0.2s;
		}

		.RoundTimerContainer {
			flow-children: down;
			vertical-align: center;
			width: 100%;
			padding: 0px 40px;
			margin-bottom: 12px;

			#RoundCounter {
				horizontal-align: center;
				width: 100%;
				text-align: center;
				border-bottom: 1px solid rgba(218, 236, 255, 0.15);
				border-brush: gradient( linear, 0% 0%, 100% 0%, from( rgba(255, 255, 255, 0) ), color-stop( 0.5, white ), to( rgba(255, 255, 255, 0) ) );
				padding-bottom: 4px;
				margin-bottom: -4px;
				color: gradient( linear, 0% 0%, 0% 100%, from( white ), to( #B0BCC2 ) );
			}

			#TimeCountdown {
				horizontal-align: center;
				font-size: 56px;
				padding: 0px 24px;
				font-family: titleFont;
				font-weight: semi-bold;
				color: white;
				color: gradient( linear, 0% 20%, 0% 100%, from( white ), to( #B0BCC2 ) );
				text-shadow: 0px 2px 12px rgba(0, 0, 0, 0.728); 
				text-align: center;
			}
		}		
	}

	.HUDHeroContainer {
		width: fill-parent-flow( 1 );
		margin-top: 52px;

		.HPBarInfoContainer {
			width: fill-parent-flow( 1 );
			flow-children: down;
			padding: 0px 12px;

			#LeftHeroStatusContainer,
			#RightHeroStatusContainer {
				width: fill-parent-flow( 1 );
				box-shadow: 0px 6px 24px -4px rgba(0, 0, 0, 0.7);
				
				#HPBarBG, #HPBarMID, #HPBarFG {
					width: 100%;
					height: 32px;
				}
				
				#HPBarBG {
					background-color: gradient( linear, 0% 0%, 0% 100%, from( #010307 ), to( #152131 ));
					border: 1px solid rgba(255, 255, 255, 0.6);
					border-brush: gradient( linear, 0% 0%, 0% 100%, from( #dcf3ff ), to( #6d777b53 ));
				}
				
				#HPBarMID {
					width: 94%;
					height: 32px;
					background-color: #FFFFFFcc;
					visibility: collapse;
				}
				
				#HPBarFG {
					width: 85%;
					height: 32px;
					background-color: gradient( linear, 0% 0%, 0% 100%, from( #FFF2DF ), color-stop( 0.48, #d7b56b ), color-stop( 0.52, #b58d4d ), to( #64481f ));
					box-shadow: inset 0px 0px 0px 1px rgba(255, 255, 255, 0.04);
				}

				.HPParticles {
					width: 700px;
					height: 100%;
					hue-rotation: -80deg;
					saturation: 0.7;
					brightness: 6;
					opacity: 0.2;
					overflow: noclip;
					blur: gaussian( 1px );
				}
			}

			.P1HealthLow & #LeftHeroStatusContainer,
			.P2HealthLow & #RightHeroStatusContainer {
				animation-name: FlashHealthBar;
				animation-duration: 0.2s;
				animation-iteration-count: 2;				

				#HPBarFG {
					background-color: gradient( linear, 0% 0%, 0% 100%, from( #FF9898 ), color-stop( 0.48, #E84D4D ), color-stop( 0.52, #BB2D2D ), to( #5F1616 ));					

					animation-name: GlowHealthBar;
					animation-duration: 0.5s;
					animation-iteration-count: infinite;
					animation-direction: alternate-reverse;
				}

				.HPParticles {
					hue-rotation: -120deg;
					saturation: 0.9;
					brightness: 3;
					opacity: 0.3;
				}				
			}
			
			#LeftHeroStatusContainer {
				transform: skew( 15deg );
			}

			#RightHeroStatusContainer {
				transform: skew( -15deg );
			}

			.HeroNameContainer {
				width: 100%;
				margin-top: 8px;

				#HeroName {
					font-size: 26px;
					color: rgba(255, 255, 255, 0.96);
					text-shadow: 0px 4px 16px black;
					text-transform: uppercase;
					font-family: titleFont;
					font-weight: semi-bold;
					letter-spacing: 1px;
					vertical-align: center;
				}

				#RoundPips {
					flow-children: right;
					
					.RoundPipIcon {
						opacity: 0;
						margin: 4px;
						width: 28px;
						height: 28px;
						background-image: url("file://{images}/events/crownfall/fight/hud/win_icon.png");
						background-size: cover;
						img-shadow: 0px 2px 16px rgba(0, 0, 0, 0.4);
					}
				}
			}

			.SingleUseActionContainer {
				width: 44px;
				height: 44px;
				margin-top: 6px;
				border: 2px solid white;
				border-brush: gradient( linear, 0% 0%, 0% 100%, from( #FFFFFF ), color-stop( 0.48, #A8B0BC ), color-stop( 0.52, #444950 ), to( #70767E ));
				
				visibility: collapse;
				saturation: 1;

				#SingleUseActionImage {
					width: 116%;
					overflow: noclip;
					horizontal-align: center;
					vertical-align: center;
				}

				&.HasSingleUseAction {
					visibility: visible;
				}

				&.SingleUseActionUnavailable 
				{
					border: 1px solid rgba(255, 255, 255, 1);
					opacity: 0.2;

					#SingleUseActionImage {
						saturation: 0.1;
					}
				}
			}

			#SingleUseActionContainerLeft {
				margin-left: 36px;
				transform: skewX( 15deg );

				#SingleUseActionImage {
					transform: skewX( -15deg );
				}
			}

			#SingleUseActionContainerRight {
				horizontal-align: right;
				margin-right: 36px;
				transform: skewX( -15deg );

				#SingleUseActionImage {
					transform: skewX( 15deg );
				}
			}
		}

		.PortraitAndSheildContainer {
			flow-children: down;
			padding: 0px 8px;

			.HeroPortraitContainer {
				margin: 0px 16px 0px;
				border: 2px solid rgb(255, 255, 255);
				border-brush: gradient( linear, 0% 0%, 0% 100%, from( #FFFFFF ), color-stop( 0.48, #A8B0BC ), color-stop( 0.52, #444950 ), to( #70767E ));
				box-shadow: 0px 12px 32px -4px rgba(0, 0, 0, 0.6);

				.HeroPortrait {
					width: 200px;
					height: width-percentage( 56.25% );
					margin: -20px -16px -12px;
				}
			}

			.ShieldContainer {
				width: 100%;
				margin-top: 8px;
				padding-bottom: 24px;
				
				.ShieldIcon,
				.ShieldIconBroken {
					width: 28px;
					img-shadow: 0px 2px 16px rgba(0, 0, 0, 0.4);
				}

				.ShieldIconBroken {
					visibility: collapse;
				}
				
				.ShieldBarContainer {
					vertical-align: center;
					width: fill-parent-flow(1);
					height: 20px;
					margin-top: 4px;
					box-shadow: 0px 4px 48px -2px rgba(0, 0, 0, 0.6);

					animation-name: FlashHealthBar;
					animation-duration: 0.2s;
					animation-iteration-count: 2;
					
					.ShieldBarBackground {
						width: 100%;
						height: 100%;
						background-color: gradient( linear, 0% 0%, 0% 100%, from( #010307 ), to( #152131 ));
						border: 1px solid rgba(255, 255, 255, 0.2);
						border-brush: gradient( linear, 0% 0%, 0% 100%, from( #dcf3ff ), to( #6d777b53 ));
					}

					.ShieldBar {
						width: 50%;
						height: 100%;
						background-color: gradient( linear, 0% 0%, 0% 100%, from( #98D8FF ), color-stop( 0.48, #5694D6 ), color-stop( 0.52, #3660A8 ), to( #1B4372 ));
					}
				}
			}
			
			.ScoreContainer {
				flow-children: down;
				margin-top: -16px;
				visibility: collapse;

				.ScoreLabel {
					margin-right: 4px;
					opacity: 0.6;
					margin-bottom: -6px;
					color: rgba(255, 255, 255, 0.96);
					text-shadow: 0px 4px 12px black;
				}				

				.ScorePTS {
					color: #FFF2DF;
					text-shadow: 0px 4px 12px black;
					margin-top: 5.5px;
					margin-left: 4px;
				}

				.ScoreValue {
					font-weight: semi-bold;
					color: gradient( linear, 0% 35%, 0% 100%, from( #FFF2DF ), color-stop( 0.48, #ebc386 ), color-stop( 0.52, #BA8C47 ), to( #8d6c3a ) );
					brightness: 1.3;
					letter-spacing: -0.1px;
					text-shadow: 0px 4px 12px black;
					                                                          
				}

				.SinglePlayer:not(.FirstFight) & {
					visibility: visible;
				}
			}
		}
	
		&.Left {
			flow-children: right;

			.HeroNameContainer {
				flow-children: right;
			}

			.PortraitAndSheildContainer {
				padding-right: 24px;
				margin-right: -16px;
			}

			.ShieldContainer {
				flow-children: right;
				padding-right: 24px;
				margin-right: -24px;
				margin-left: -6px;				

				.ShieldIcon,
				.ShieldIconBroken {
					margin-right: 12px;
				}
			}

			.ScoreContainer {
				horizontal-align: left;
				margin-left: 40px;
			}

			#HPBarBG, #HPBarFG, #HPBarMID {
				horizontal-align: right;
			}

			.HeroPortraitContainer {
				transform: skewX( 15deg );			

				.HeroPortrait {
					transform: scaleX( -1 ) skewX( -15deg );
				}
				.P1PortraitFlipped & .HeroPortrait {
					transform: scaleX( 1 ) skewX( -15deg );
				}
			}

			.HeroNameContainer {
				padding-left: 20px;
			}

			.HPBarInfoContainer {
				margin-left: -28px;
			}

			.ShieldBarContainer {
				transform: skewX( 15deg );
			}

			.HPParticles {
				transform: scaleX( 1 ) translateX( -40px );
				horizontal-align: left;
			}

			.P1RoundWins1 &	#RoundPips	#RoundPip1,
			.P1RoundWins2 &	#RoundPips	#RoundPip1,
			.P1RoundWins2 &	#RoundPips	#RoundPip2
			{
				opacity: 1;
			}
			
			.P1ShieldBroken & {
				.ShieldBarContainer {
					animation-name: none;
				}
				.ShieldIconBroken {
					visibility: visible;
				}
				.ShieldIcon {
					visibility: collapse;
				}
				.ShieldBar {
					background-color: gradient( linear, 0% 0%, 0% 100%, from( #98D8FF ), color-stop( 0.48, #5694D6 ), color-stop( 0.52, #3660A8 ), to( #1B4372 ));
					saturation: 0.1;
					opacity: 0.15;

					animation-name: GlowHealthBar;
					animation-duration: 0.3s;
					animation-iteration-count: infinite;
					animation-direction: alternate-reverse;
				}

				animation-name: ShakeHealthBar;
				animation-duration: 0.1s;
				animation-iteration-count: 6;
				animation-timing-function: ease-out;
			}
		}

		&.Right {
			flow-children: left;

			.HeroNameContainer {
				flow-children: left;
			}

			.PortraitAndSheildContainer {
				padding-left: 24px;
				margin-left: -16px;
			}

			.ShieldContainer {
				flow-children: left;
				padding-left: 24px;
				margin-left: -24px;
				margin-right: -6px;

				.ShieldIcon,
				.ShieldIconBroken {
					margin-left: 12px;
				}
			}

			.ShieldBar {
				horizontal-align: right;
			}

			#HPBarBG, #HPBarFG, #HPBarMID {
				horizontal-align: left;
			}

			.HeroPortraitContainer {
				transform: skewX( -15deg );

				.HeroPortrait {
					transform: skewX( 15deg );
				}
				.P2PortraitFlipped & .HeroPortrait {
					transform: skewX( -15deg ) scaleX( -1 ) ;
				}
			}

			.HeroNameContainer {
				padding-right: 20px;
			}

			.HPBarInfoContainer {
				margin-right: -28px;
			}

			.ShieldBarContainer {
				transform: skewX( -15deg );
			}

			.HPParticles {
				transform: scaleX( -1 ) translateX( 40px );
				horizontal-align: right;
			}

			.P2RoundWins1 &	#RoundPips	#RoundPip1,
			.P2RoundWins2 &	#RoundPips	#RoundPip1,
			.P2RoundWins2 &	#RoundPips	#RoundPip2
			{
				opacity: 1;
			}

			.P2ShieldBroken & {

				.ShieldBarContainer {
					animation-name: none;
				}
				.ShieldIconBroken {
					visibility: visible;
				}
				.ShieldIcon {
					visibility: collapse;
				}
				.ShieldBar {
					background-color: gradient( linear, 0% 0%, 0% 100%, from( #98D8FF ), color-stop( 0.48, #5694D6 ), color-stop( 0.52, #3660A8 ), to( #1B4372 ));
					saturation: 0.1;
					opacity: 0.15;

					animation-name: GlowHealthBar;
					animation-duration: 0.3s;
					animation-iteration-count: infinite;
					animation-direction: alternate-reverse;
				}

				animation-name: ShakeHealthBar;
				animation-duration: 0.12s;
				animation-iteration-count: 5;
				animation-timing-function: ease-out;
			}
		}
	}
}

.TimerLow {
	#TimeCountdown {
		animation-name: TimerLow_PulseText_Animation;
		animation-duration: 1s;
		animation-iteration-count: 6;
	}

	#CountdownContainer {
		animation-name: TimerLow_QuickPulseContainer_Animation;
		animation-duration: 0.2s;
		animation-iteration-count: 2;
	}

	.TimerBackgroundImage {
		wash-color: rgba(255, 0, 0, 1);
		brightness: 6;
	}
}

.P0WonMatch.MatchStateMatchEnd,
.P1WonMatch.MatchStateMatchEnd,
.DrewMatch.MatchStateMatchEnd,
.TimeOutHappening {		
	#AnnouncementContainer {
		transform: none;
	}	
}

#AnnouncementContainer {
	horizontal-align: center;
	vertical-align: center;
	opacity-mask: url( "file://{images}/events/crownfall/fight/grain_mask.png" );

	width: 100%;
	height: 100%;

	transition-property: transform;
	transition-duration: 2s;
	transition-timing-function: cubic-bezier(0, 1, 0, 1);                
	
	transform: scale3d( 1.1, 1.1, 1 );

	.Announcement {
		horizontal-align: center;
		vertical-align: center;
		padding: 4px 40px;
		margin: 24px;
		margin-bottom: 180px;
		pre-transform-rotate2d: -8deg;
		
		font-size: 80px;
		line-height: 0.75;
		font-family: titleFont;
		font-weight: bold;
		color: white;
		text-align: center;
		font-family: underlordsTitleFont;
		background-color: black;
		border-radius: 8px;

		transition-property: transform, opacity;
		transition-duration: 0.2s;
		transition-timing-function: cubic-bezier(0.5, 0, 0.8, 1.3), ease-out;

		opacity: 0;
		transform: scale3d( 2, 2, 1 );

		& b {
			font-size: 130px;
		}		

		.P0WonMatch.MatchStateMatchEnd &.MatchEndText.LeftHeroWins,
		.P1WonMatch.MatchStateMatchEnd &.MatchEndText.RightHeroWins,
		.DrewMatch.MatchStateMatchEnd &.MatchEndText.Draw,
		.TimeOutHappening &.TimeOutText {			
			opacity: 1;
			transform: none;

			.ShowVisualNovel & {
				opacity: 0;
				transform: scale3d( 2, 2, 1 );
			}
		}		
	}
}

.IntroTextContainer {
	overflow: noclip;
	horizontal-align: center;
	vertical-align: center;
	padding: 120px;

	transition-property: transform;
	transition-duration: 2s;
	transition-timing-function: cubic-bezier(0, 1, 0, 1);                

	transform: scale3d( 1, 1, 1 );

	.MatchStateRound1Start & {
		transition-property: opacity;
		transition-duration: 0.3s;

		transform: scale3d( 0.94, 0.94, 1 );
		transition-timing-function: ease-in;
		transition-delay: 1s;
	}

	.ShowMovie & {
		opacity: 0;
	}

	.Spattering {
		horizontal-align: center;
		vertical-align: center;
		width: 1000px;
		height: 800px;
		ignore-parent-flow: true;

		background-image: url( "file://{images}/events/crownfall/fight/text_dust.png" );
		background-size: contain;
		background-position: center;
		background-repeat: no-repeat;

		transition-property: transform, opacity;
		transition-duration: 0.2s;
		transition-timing-function: cubic-bezier(0.5, 0, 0.8, 1.3), ease-out;

		opacity: 0;
		transform: scale3d( 2, 2, 1 );

		.MatchStateRound1Start & {
			opacity: 1;
			transform: none;
			transition-delay: 0.6s, 0.4s;
		}
	}

	Label {
		horizontal-align: center;
		vertical-align: center;
		background-color: black;
		padding: 4px 48px;
		margin: 24px;
		border-radius: 8px;

		font-family: underlordsTitleFont;
		text-align: center;
		color: white;
		text-transform: uppercase;
		font-weight: bold;
		font-size: 180px;

		max-width: 820px;
		text-overflow: shrink;
		max-height: 220px;

		transition-property: transform, opacity;
		transition-duration: 0.2s;
		transition-timing-function: cubic-bezier(0.5, 0, 0.8, 1.3), ease-out;

		opacity: 0;

		.MatchStateRound1Start & {
			opacity: 1;
			transform: none;
			transition-delay: 0.6s, 0.4s;
		}
	}	

	.HeroName1Label {
		pre-transform-rotate2d: 4deg;
		margin-bottom: 250px;

		transform: scale3d( 5, 5, 1 ) rotateZ( -5deg );
		transition-delay: 0s;
	}
	
	.VSLabel {
		font-size: 64px;
		ignore-parent-flow: true;
		vertical-align: center;
		z-index: 1;

		transform: scale3d( 2, 2, 1 );
		transition-delay: 0.1s;
	}
	
	.HeroName2Label {
		pre-transform-rotate2d: 12deg;
		margin-top: 250px;

		transform: scale3d( 5, 5, 1 ) rotateZ( 5deg );
		transition-delay: 0.2s;
	}
}

#KOMovie, #PerfectMovie {
	width: 100%;
	height: 100%;
	opacity: 0;

	transition-property: opacity;
	transition-duration: 0.1s;
	
}

#KOMovie {
	.KOHappening & {
		opacity: 1;
		transition-duration: 0.3s;
	}
	.KOHappening.Perfect & {
		opacity: 0;
	}
}

#PerfectMovie {
	.KOHappening.Perfect & {
		opacity: 1;
		transition-duration: 0.3s;
	}
}

.RoundIntroMovie {
	width: 100%;
	height: 100%;
	opacity: 0;

	transition-property: opacity;
	transition-duration: 0.1s;
}

.MatchStateRound1Start.ShowMovie #Round1Movie,
.MatchStateRound2Start.ShowMovie #Round2Movie,
.MatchStateRound3Start.ShowMovie #Round3Movie {
	opacity: 1;
	transition-duration: 0.3s;
}


#ScoreBreakdownContainer {	
	horizontal-align: center;
	vertical-align: bottom;
	margin-bottom: 156px;
	padding: 180px 0px 40px;

	opacity: 0;
	transform: translateY( 32px );

	transition-property: opacity, transform;
	transition-duration: 0.4s;
	transition-timing-function: ease-out, cubic-bezier(0, 0.9, 0, 0.9);                
	transition-delay: 0.8s;

	.MatchStateMatchEnd.SinglePlayer:not(.FirstFight) & {
		opacity: 1;
		transform: none;

		transition-duration: 0.15s;
		transition-delay: 0s;
		transition-timing-function: cubic-bezier(1, 0, 1, 1);               

		.ShowVisualNovel & {
			opacity: 0;
			transform: translateY( 32px );
		}
	}	

	Label {
		color: rgba(222, 240, 255, 0.651);
		text-shadow: 0px 2px 12px rgba(0, 0, 0, 0.8);
	}

	.ScoreHeadingContainer {
		height: 48px;
		overflow: noclip;

		.ScoreHeading {
			horizontal-align: center;
			vertical-align: center;
			text-shadow: 0px 4px 12px rgba(0, 0, 0, 1);
			color: gradient( linear, 0% 20%, 0% 100%, from( #B0BCC2 ), to( white ) );
			color: whitesmoke;
			width: 132px;
			text-align: center;
			text-overflow: shrink;
		}

		.ScoreBackground {
			horizontal-align: center;
			vertical-align: center;
			width: 920px;
			transform: translateY( 52px );
		}
	}

	.ScoreBreakdownRow {
		horizontal-align: center;
		margin-top: 3px;
		width: 360px;
		border-top: 1px solid rgba(255, 255, 255, 0.05);
		padding-top: 2px;

		.ScoreValue {
			horizontal-align: right;
			color: gradient( linear, 0% 35%, 0% 100%, from( #FFF2DF ), color-stop( 0.48, #ebc386 ), color-stop( 0.52, #BA8C47 ), to( #8d6c3a ) );
			font-weight: bold;
		}

		&.Total {
			flow-children: down;
			border-top: 0px transparent;
			margin-top: -2px;
			padding-top: 0px;

			.ScoreText {
				horizontal-align: center;
				margin: 0px 12px;				
			}

			.ScoreValue {
				horizontal-align: center;
				text-shadow: 0px 4px 12px rgba(0, 0, 0, 0.4);
				margin-top: -8px;

				.MatchStateMatchEnd.SinglePlayer & {
					animation-name: PulseScoreTotal;
					animation-duration: 0.3s;
					animation-iteration-count: 2;
					animation-delay: 1.3s;
				}
			}
		}
	}	
}

@keyframes 'GlowHealthBar' {
	0% {
		brightness: 1;
	}
	
	100% {
		brightness: 4;
	}
}

@keyframes 'FlashHealthBar' {
	0% {
		
	}
	
	10% {
		brightness: 6;
	}

	100% {
		
	}
}

@keyframes 'FlashRedGlow' {
	0% {
		opacity: 0;
	}

	1% {
		opacity: 0.5;
	}

	100% {
		opacity: 0;
	}
}

@keyframes 'PulseScoreTotal' {
	0% {
		
	}
	
	20% {
		brightness: 4;
		transform: scale3d( 1.15, 1.15, 1 );
	}

	100% {
		
	}
}

@keyframes 'TimerLow_PulseText_Animation' {
	0% {
		text-shadow: 0px 0px 6px rgba(255, 0, 0, 0);
		brightness: 1;
	}

	5% {
		text-shadow: 0px 0px 12px rgba(255, 0, 0, 0.8);
		transform: scale3d( 1.3, 1.3, 1 );
		brightness: 3;
	}
	
	100% {
		text-shadow: 0px 0px 6px rgba(255, 0, 0, 0);
		brightness: 1;
	}
}

@keyframes 'TimerLow_QuickPulseContainer_Animation' {
	0% {
		
	}
	
	20% {
		brightness: 4;
		transform: scale3d( 1.06, 1.06, 1 );
	}

	100% {
		
	}
}

@keyframes 'ShakeHealthBar' {
	0% {
		transform: translateX( 0px );
	}
	
	50% {
		transform: translateX( 8px );
	}

	100% {
		transform: translateX( 0px );
	}
}

@keyframes 'AnimateDustMask' {
	0% {
		opacity-mask-position: 10px 0px;
	}
	
	100% {
		opacity-mask-position: 50px 0px;
	}
}

@define columnWidth: 80px;
@define commandColumnWidth: 140px;

#MoveListPanel {
	background-color: gradient( linear, 0% 0%, 0% 100%, from( #253242 ), to( #0e151f ) );
	flow-children: down;
	vertical-align: center;
	margin-left: 40px;
	width: 760px;
	box-shadow: 0px 24px 120px -4px rgba(0, 0, 0, 0.482);

	opacity: 0;
	transform: translateX( -24px ) scale3d( 1.1, 1.1, 1 );

	transition-property: opacity, transform;
	transition-duration: 0.2s;
	transition-timing-function: cubic-bezier(0, 0.9, 0, 0.9);                

	.Paused & {
		opacity: 1;
		transform: none;
		
		transition-duration: 0.1s;
		transition-timing-function: cubic-bezier(1, 0, 1, 1);               
	}

	.PanelOutline {
		ignore-parent-flow: true;
		width: 100%;
		height: 100%;
		border: 1px solid rgba(217, 240, 255, 0.05);
	}

	#MoveListTitle {
		padding: 16px 16px 12px 24px;
		horizontal-align: left;
		background-color: rgba(2, 6, 10, 0.4);
		width: 100%;
		border-bottom: 1px solid rgba(0, 0, 0, 0.1);

		text-transform: uppercase;
		font-size: 16px;
		letter-spacing: 1.5px;
		line-height: 1;
		color: rgba(225, 235, 244, 0.6);
		text-shadow: 0px 4px 12px rgba(0, 0, 0, 0.6);

		& b {
			font-size: 28px;
			font-family: titleFont;
			color: rgba(245, 245, 245, 1);
			font-weight: semi-bold;
		}
	}

	.MoveList {
		flow-children: down;
		padding: 16px;
		padding-right: 8px;

		.MoveListInstallHeader	{
			width: fill-parent-flow(1);

			margin: 20px 0px 6px 4px;

			Label {
				color: LighterGrey;
				text-transform: uppercase;
				font-size: 14px;
				letter-spacing: 0.5px;
			}
		}

		.MoveListHeader {
			width: fill-parent-flow(1);
			flow-children: right;
			margin-bottom: 8px;

			Label {
				width: columnWidth;
				text-align: center;
				margin-left: 1px;
				color: LighterGrey;
				text-transform: uppercase;
				font-size: 14px;
				letter-spacing: 0.5px;
				text-overflow: shrink;

				&.Command {
					text-align: left;
					width: commandColumnWidth;
				}
			}
		}

		#MoveListContainer {
			flow-children: down;
			
			.MoveListEntry {
				flow-children: right;
				font-size: 10px;
				padding: 4px 8px;
				min-height: 38px;
				background-color: gradient( linear, 20% 0%, 100% 0%, from( rgba(161, 200, 255, 0.03) ), to( rgba(203, 225, 255, 0) ) );
				width: fill-parent-flow(1);
				margin: 0px 0px 1px;			

				> Panel,
				Label {
					width: columnWidth;
				}

				.Command {
					width: commandColumnWidth;
				}

				Label {
					text-align: center;
					color: LighterGrey;
					margin-top: 1px;
					text-transform: uppercase;
					letter-spacing: 1px;
					font-size: 16px;
					text-shadow: 0px 2px 8px rgba(0, 0, 0, 0.8);
					vertical-align: center;
					
					&.Name {
						font-size: 18px;
						text-align: left;
						width: fill-parent-flow(1);
						color: rgba(245, 245, 245, 0.966);
						text-transform: none;
						letter-spacing: 0px;
						margin-right: 8px;
						text-overflow: shrink;
					}
				}
	
				#command {
					flow-children: right;
					vertical-align: center;

					Panel {
						width: 26px;
						height: 26px;

						background-size: 16px;
						background-repeat: no-repeat;
						background-position: center 4px;
						background-texture-size: 48px;
						background-img-opacity: 0.8;

						border-radius: 2.5px;
						margin-right: 6px;

						background-color: gradient( linear, 0% 0%, 0% 100%, from( #44515e ), color-stop( 0.1, #38434e ), to( #212930 ));
						border: 1px solid rgba(0, 0, 0, 0.8);
						border-bottom: 2.6px solid rgba(0, 0, 0, 0.8);
						box-shadow: 0px 0px 0px 1px rgba(230, 247, 255, 0.1);

					}
				}
	
				&.Safe .OnBlock { color: winnerGreen; }
				&.Equal .OnBlock { color: rgb(60, 113, 226); }
				&.TurnOver .OnBlock { color: white; }
				&.Unsafe .OnBlock { color: rgb(243, 147, 69); }
				&.VeryUnsafe .OnBlock { color: rgb(241, 48, 48); }
			}
		}
	}

}


                
.Up {
	background-image: url("file://{images}/control_icons/24px/arrow_up.svg");
}
.Down {
	background-image: url("file://{images}/control_icons/24px/arrow_down.svg");
}
.Forward {
	background-image: url("file://{images}/control_icons/24px/arrow_right.svg");
}
.Back {
	background-image: url("file://{images}/control_icons/24px/arrow_left.svg");
}
.DownBack {
	background-image: url("file://{images}/control_icons/24px/arrow_bottom_left.svg");
}
.DownForward {
	background-image: url("file://{images}/control_icons/24px/arrow_bottom_right.svg");
}
.Attack {
	background-image: url("file://{images}/control_icons/24px/space.svg");
	width: 36px;
}
.Special {
	background-image: url("file://{images}/control_icons/24px/alt.svg");
	background-size: 18px;
	background-position: center 3px;
}

.ForegroundSceneBlur{
	width: 100%;
	height: 100%;
	opacity: 0.5;
	opacity-mask: url( "file://{images}/masks/halftone_gradient.psd" );	
	-s2-mix-blend-mode: screen;
	contrast: 1.1;
	brightness: 2;
	wash-color: #98afe7;
	z-index: 2;
}


.ForegroundSceneBlur.Blur0 {
	transform: translateX(5px) translateY(5px);

}

.ForegroundSceneBlur.Blur1 {
	transform: translateX(-5px) translateY(-5px);
}